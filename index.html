<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ“¿ ä¸²ç è¨ˆç®—å™¨ Pro</title>
  <style>
    :root{--bg1:#f0f4f8;--bg2:#d9e4ec;--card:#ffffff;--accent:#0066cc;--muted:#666}
    body{font-family:"Microsoft JhengHei",sans-serif;margin:30px auto;max-width:760px;padding:20px;background:linear-gradient(135deg,var(--bg1),var(--bg2));border-radius:14px}
    h1{text-align:center;color:#222;margin-bottom:16px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(18,40,64,0.07);margin-bottom:20px}
    h2{color:var(--accent);margin:0 0 8px 0}
    label{display:block;margin-top:10px;font-weight:600}
    .row{display:flex;gap:10px;align-items:center}
    input[type=number]{flex:1;padding:9px;border:1px solid #d0d7df;border-radius:8px;font-size:14px}
    select{padding:9px;border:1px solid #d0d7df;border-radius:8px}
    .result{margin-top:12px;font-weight:700;color:#d35400;font-size:1.15rem}
    .small{font-size:0.9rem;color:var(--muted)}
    footer{font-size:0.85rem;color:var(--muted);text-align:center;margin-top:12px}
    .hint{font-size:0.85rem;color:#2d6ca2;margin-top:8px}
  </style>
</head>
<body>
  <h1>ğŸ“¿ ä¸²ç è¨ˆç®—å™¨ Pro</h1>

  <!-- è¨ˆç®—ç æ•¸ï¼ˆå¯åˆ†åˆ¥è¨­ç½®æ‰‹åœã€ç ç›´å¾‘çš„å–®ä½ï¼‰ -->
  <div class="card">
    <h2>ğŸŒŸ è¨ˆç®—ç æ•¸ ğŸŒŸ</h2>
    <div class="small">å…¬å¼ï¼šç æ•¸ = æ‰‹åœ Ã· ç ç›´å¾‘ + 3.14</div>

    <label>æ‰‹åœ</label>
    <div class="row">
      <input id="handCircum1" type="number" min="0" step="any" placeholder="è¼¸å…¥æ‰‹åœï¼ˆæ•¸å€¼ï¼‰">
      <select id="unitHand1">
        <option value="mm">æ¯«ç±³ (mm)</option>
        <option value="cm">å…¬åˆ† (cm)</option>
      </select>
    </div>

    <label>ç ç›´å¾‘</label>
    <div class="row">
      <input id="beadDia1" type="number" min="0" step="any" placeholder="è¼¸å…¥ç ç›´å¾‘ï¼ˆæ•¸å€¼ï¼‰">
      <select id="unitBead1">
        <option value="mm">æ¯«ç±³ (mm)</option>
        <option value="cm">å…¬åˆ† (cm)</option>
      </select>
    </div>

    <div class="result">ä¸²ç æ•¸é‡ï¼š<span id="beadCount">-</span></div>
    <div class="hint">èªªæ˜ï¼šæ¯å€‹è¼¸å…¥çš„å–®ä½å¯åˆ†åˆ¥è¨­å®šï¼Œç¨‹å¼æœƒè‡ªå‹•æ›ç®—æˆ mm é€²è¡Œè¨ˆç®—ä¸¦ä»¥æœ€è¿‘çš„ 0.5 é¡†é¡¯ç¤ºï¼ˆä¾‹å¦‚ï¼š10 æˆ– 10.5ï¼‰ã€‚</div>
  </div>

  <!-- è¨ˆç®—æ‰‹åœï¼ˆå¯è¨­å®šç ç›´å¾‘å–®ä½èˆ‡æ‰‹åœé¡¯ç¤ºå–®ä½ï¼‰ -->
  <div class="card">
    <h2>â„ï¸ è¨ˆç®—æ‰‹åœ â„ï¸</h2>
    <div class="small">å…¬å¼ï¼šæ‰‹åœ = (ç æ•¸ - 3.14) Ã— ç ç›´å¾‘</div>

    <label>ç æ•¸</label>
    <input id="beadCount2" type="number" min="0" step="any" placeholder="è¼¸å…¥ç æ•¸ï¼ˆæ•¸å€¼ï¼‰">

    <label>ç ç›´å¾‘</label>
    <div class="row">
      <input id="beadDia2" type="number" min="0" step="any" placeholder="è¼¸å…¥ç ç›´å¾‘ï¼ˆæ•¸å€¼ï¼‰">
      <select id="unitBead2">
        <option value="mm">æ¯«ç±³ (mm)</option>
        <option value="cm">å…¬åˆ† (cm)</option>
      </select>
      <select id="unitHand2">
        <option value="mm">é¡¯ç¤ºç‚º æ¯«ç±³ (mm)</option>
        <option value="cm">é¡¯ç¤ºç‚º å…¬åˆ† (cm)</option>
      </select>
    </div>

    <div class="result">æ‰‹åœï¼š<span id="handCircum">-</span></div>
    <div class="hint">èªªæ˜ï¼šçµæœä»¥æœ€è¿‘çš„ 0.5 å–®ä½é¡¯ç¤ºï¼ˆæ•´æ•¸æœƒé¡¯ç¤ºç‚º 10ï¼ŒåŠå–®ä½å‰‡é¡¯ç¤ºç‚º 10.5ï¼‰ã€‚</div>
  </div>

  <footer>æŠŠé€™å€‹æª”æ¡ˆæ”¾æˆ <code>index.html</code> ä¸¦ä¸Šå‚³åˆ° GitHub repo å³å¯åœ¨ GitHub Pages ä½¿ç”¨ã€‚</footer>

  <script>
    // å››æ¨äº”å…¥åˆ°æœ€è¿‘ 0.5
    function roundToHalf(x) {
      return Math.round(x * 2) / 2;
    }

    // æ ¼å¼åŒ–è¼¸å‡ºï¼šæ•´æ•¸é¡¯ç¤ºç‚º 10ï¼ŒåŠæ•¸é¡¯ç¤ºç‚º 10.5
    function formatHalf(n) {
      if (typeof n !== 'number' || isNaN(n)) return '-';
      // è®“ -0 è®Šæˆ 0
      if (Math.abs(n) < 1e-12) n = 0;
      if (Math.abs(n % 1) < 1e-9) return String(n); // æ•´æ•¸
      return n.toFixed(1); // é¡¯ç¤ºä¸€ä½å°æ•¸ï¼ˆæ‡‰è©²åªæœƒæ˜¯ .5ï¼‰
    }

    // å–å¾—æ•¸å€¼å®‰å…¨å‡½æ•¸
    function getVal(id) {
      const v = parseFloat(document.getElementById(id).value);
      return isNaN(v) ? null : v;
    }

    // è¨ˆç®—ç æ•¸ï¼ˆæ‰‹åœèˆ‡ç ç›´å¾‘å–®ä½å„è‡ªè¨­å®šï¼‰
    function calcBeadCount() {
      const hand = getVal('handCircum1');
      const bead = getVal('beadDia1');
      const unitHand = document.getElementById('unitHand1').value;
      const unitBead = document.getElementById('unitBead1').value;

      if (hand && bead && hand > 0 && bead > 0) {
        const handMm = unitHand === 'cm' ? hand * 10 : hand;
        const beadMm = unitBead === 'cm' ? bead * 10 : bead;
        const raw = handMm / beadMm + 3.14;
        const rounded = roundToHalf(raw);
        document.getElementById('beadCount').innerText = formatHalf(rounded);
      } else {
        document.getElementById('beadCount').innerText = '-';
      }
    }

    // è¨ˆç®—æ‰‹åœï¼ˆç ç›´å¾‘å–®ä½å¯è¨­å®šï¼Œçµæœé¡¯ç¤ºå–®ä½å¯é¸ï¼‰
    function calcHandCircum() {
      const beadCount = getVal('beadCount2');
      const beadDia = getVal('beadDia2');
      const unitBead = document.getElementById('unitBead2').value;
      const outUnit = document.getElementById('unitHand2').value;

      if (beadCount !== null && beadDia && beadCount > 0 && beadDia > 0) {
        const beadDiaMm = unitBead === 'cm' ? beadDia * 10 : beadDia;
        const circumMm = (beadCount - 3.14) * beadDiaMm;
        const circumOut = outUnit === 'cm' ? circumMm / 10 : circumMm;
        const rounded = roundToHalf(circumOut);
        document.getElementById('handCircum').innerText = formatHalf(rounded) + ' ' + outUnit;
      } else {
        document.getElementById('handCircum').innerText = '-';
      }
    }

    // ç¶å®šäº‹ä»¶ï¼šæ‰€æœ‰è¼¸å…¥èˆ‡å–®ä½æ”¹è®Šæ™‚å³æ™‚è¨ˆç®—
    [
      'handCircum1','beadDia1','unitHand1','unitBead1',
      'beadCount2','beadDia2','unitBead2','unitHand2'
    ].forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      const ev = el.tagName.toLowerCase() === 'select' ? 'change' : 'input';
      el.addEventListener(ev, () => {
        calcBeadCount();
        calcHandCircum();
      });
    });

    // é é¢è¼‰å…¥æ™‚å˜—è©¦è¨ˆç®—ä¸€æ¬¡ï¼ˆè‹¥æœ‰é è¨­å€¼ï¼‰
    window.addEventListener('load', () => {
      calcBeadCount();
      calcHandCircum();
    });
  </script>
</body>
</html>

