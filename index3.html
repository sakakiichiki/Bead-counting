<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>📿 串珠計算器 Pro</title>
  <link rel="stylesheet" href="style.css">

</head>
<body>
  <h1>📿 串珠計算器 Pro</h1>

  <!-- 計算珠數（可分別設置手圍、珠直徑的單位） -->
  <div class="card">
    <h2>🌟 計算珠數 🌟</h2>

    <label>手圍</label>
    <div class="row">
      <input id="handCircum1" type="number" min="0" step="any" placeholder="輸入手圍（數值）">
      <select id="unitHand1">
        <option value="mm">毫米 (mm)</option>
        <option value="cm">公分 (cm)</option>
      </select>
    </div>

    <label>珠直徑</label>
    <div class="row">
      <input id="beadDia1" type="number" min="0" step="any" placeholder="輸入珠直徑（數值）">
      <select id="unitBead1">
        <option value="mm">毫米 (mm)</option>
        <option value="cm">公分 (cm)</option>
      </select>
    </div>

    <div class="result">串珠數量：<span id="beadCount">-</span></div>
    <div class="hint">說明：每個輸入的單位可分別設定，程式會自動換算成 mm 進行計算並以最近的 0.5 顆顯示（例如：10 或 10.5）。</div>
  </div>

  <!-- 計算手圍（可設定珠直徑單位與手圍顯示單位） -->
  <div class="card">
    <h2>❄️ 計算手圍 ❄️</h2>

    <label>珠數</label>
    <input id="beadCount2" type="number" min="0" step="any" placeholder="輸入珠數（數值）">

    <label>珠直徑</label>
    <div class="row">
      <input id="beadDia2" type="number" min="0" step="any" placeholder="輸入珠直徑（數值）">
      <select id="unitBead2">
        <option value="mm">毫米 (mm)</option>
        <option value="cm">公分 (cm)</option>
      </select>
      <select id="unitHand2">
        <option value="mm">顯示為 毫米 (mm)</option>
        <option value="cm">顯示為 公分 (cm)</option>
      </select>
    </div>

    <div class="result">手圍：<span id="handCircum">-</span></div>
    <div class="hint">說明：結果以最近的 0.5 單位顯示（整數會顯示為 10，半單位則顯示為 10.5）。</div>
  </div>

  <footer>把這個檔案放成 <code>index.html</code> 並上傳到 GitHub repo 即可在 GitHub Pages 使用。</footer>

  <script>
    // 四捨五入到最近 0.5
    function roundToHalf(x) {
      return Math.round(x * 2) / 2;
    }

    // 格式化輸出：整數顯示為 10，半數顯示為 10.5
    function formatHalf(n) {
      if (typeof n !== 'number' || isNaN(n)) return '-';
      // 讓 -0 變成 0
      if (Math.abs(n) < 1e-12) n = 0;
      if (Math.abs(n % 1) < 1e-9) return String(n); // 整數
      return n.toFixed(1); // 顯示一位小數（應該只會是 .5）
    }

    // 取得數值安全函數
    function getVal(id) {
      const v = parseFloat(document.getElementById(id).value);
      return isNaN(v) ? null : v;
    }

    // 計算珠數（手圍與珠直徑單位各自設定）
    function calcBeadCount() {
      const hand = getVal('handCircum1');
      const bead = getVal('beadDia1');
      const unitHand = document.getElementById('unitHand1').value;
      const unitBead = document.getElementById('unitBead1').value;

      if (hand && bead && hand > 0 && bead > 0) {
        const handMm = unitHand === 'cm' ? hand * 10 : hand;
        const beadMm = unitBead === 'cm' ? bead * 10 : bead;
        const raw = handMm / beadMm + 3.14;
        const rounded = roundToHalf(raw);
        document.getElementById('beadCount').innerText = formatHalf(rounded);
      } else {
        document.getElementById('beadCount').innerText = '-';
      }
    }

    // 計算手圍（珠直徑單位可設定，結果顯示單位可選）
    function calcHandCircum() {
      const beadCount = getVal('beadCount2');
      const beadDia = getVal('beadDia2');
      const unitBead = document.getElementById('unitBead2').value;
      const outUnit = document.getElementById('unitHand2').value;

      if (beadCount !== null && beadDia && beadCount > 0 && beadDia > 0) {
        const beadDiaMm = unitBead === 'cm' ? beadDia * 10 : beadDia;
        const circumMm = (beadCount - 3.14) * beadDiaMm;
        const circumOut = outUnit === 'cm' ? circumMm / 10 : circumMm;
        const rounded = roundToHalf(circumOut);
        document.getElementById('handCircum').innerText = formatHalf(rounded) + ' ' + outUnit;
      } else {
        document.getElementById('handCircum').innerText = '-';
      }
    }

    // 綁定事件：所有輸入與單位改變時即時計算
    [
      'handCircum1','beadDia1','unitHand1','unitBead1',
      'beadCount2','beadDia2','unitBead2','unitHand2'
    ].forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      const ev = el.tagName.toLowerCase() === 'select' ? 'change' : 'input';
      el.addEventListener(ev, () => {
        calcBeadCount();
        calcHandCircum();
      });
    });

    // 頁面載入時嘗試計算一次（若有預設值）
    window.addEventListener('load', () => {
      calcBeadCount();
      calcHandCircum();
    });
  </script>
</body>
</html>



